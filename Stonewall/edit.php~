<?php
	require_once 'init.php';
	include_once 'cliente.class.php';

	// pega os dados do formulário
	$id = isset($_POST['id']) ? $_POST['id'] : null;
	$nome = isset($_POST['txtNome']) ? $_POST['txtNome'] : null;
	$email = isset($_POST['txtEmail']) ? $_POST['txtEmail'] : null;
	$data = isset($_POST['txtData']) ? $_POST['txtData'] : null;
	 
	// validação simples se campos estão vazios
	if(empty($nome) || empty($data))
	{
		echo "Há campos em branco.";
		exit;
	}
	 
	// instancia objeto aluno
	$cliente = new Clientes($nome, $dataNasc, $file_src);

	// atualiza o BD
	$PDO = db_connect();
	$sql = "UPDATE clientes SET nomeCliente = :nome, email = :email, dataCadastro = :data WHERE idCliente = :id";
	$stmt = $PDO->prepare($sql);
	$stmt->bindParam(':nome', $cliente->getNome());
	$stmt->bindParam(':email', $cliente->getEmail());
	$stmt->bindParam(':data', $cliente->getData());
	$stmt->bindParam(':id', $id, PDO::PARAM_INT);

	 if ($stmt->execute())
	 {
		header ('Location: index.php');
	 }
	 else
	{
		 echo "Erro ao alterar";
		 print_r( $stmt->errorInfo());
	 }
?>